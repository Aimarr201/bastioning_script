

#################################################
#     Archivo de configuraciones del script     #
#     Proyecto de bastionado de un servidor     #
#           Autor: Aimar Mendibil Ayo           #
#################################################


# MODULOS A INSTALAR
    ENABLE_DDNS="true" # true o false
    ENABLE_SSH="true"
    ENABLE_UFW="true"
    ENABLE_FAIL2BAN="true"
    ENABLE_UNATTENDED="true"

# PARAMETROS DDNS 
    DDNS_APIKEY=""
    DDNS_ZONE_ID=""
    DDNS_DOMAIN=""
    DDNS_CRON="*/5 * * * *" # Valor por defecto 5 minutos

# PARAMETROS SSH
    SSH_USERNAME="" # Nombre del usuario
    SSH_PORT="" # Puerto para asignar al sevicio ssh
    SSH_PUBLICKEY="" # Clave publica 

# PARAMETROS UFW
    #ENTRADA
    UFW_DAIT="true" # Denegar todo el trafico entrante por defecto
     # Si se permite todo el trafico entrante, no es necesario conficurar las siguientes reglas
        UFW_ISSH="true" # Permitir conexiones SSH entrentes(si SSH_PORT no tiene un valor definido se utilizara el estandar 22)
        UFW_IDNS="false" # Permitir trafico entrante por el puerto 53 (DNS)
        UFW_IHTTP="false" # Permitir trafico HTTP entrante
        UFW_IHTTPS="false" # Permitir trafico HTTPS entrante
        UFW_IFTP="false" # Permitir trafico FTP entrante
        UFW_ISMTP="false" # Permitir trafico SMTP entrante
        UFW_IDHCP="false" # Permitir trafico DHCP entrante
        UFW_IICMP="true" # Permitir trafico ICMP entrante
    #SALIDA
    UFW_DAOT="true" # Denegar todo el trafico saliente por defecto
     # Si se permite todo el trafico saliente, no es necesario conficurar las siguientes reglas
        UFW_OSSH="false" # Permitir trafico saliente por el puerto 22 (SSH)
        UFW_ODNS="true" # Permitir trafico saliente por el puerto 53 (DNS)
        UFW_ONTP="true" # Permitir trafico saliente por el puerto 123 (NTP)
        UFW_OHTTP="false" # Permitir trafico HTTP saliente
        UFW_OHTTPS="true" # Permitir trafico HTTPS saliente
        UFW_OFTP="false" # Permitir trafico FTP saliente
        UFW_OSMTP="false" # Permitir trafico SMTP saliente
        UFW_ODHCP="false" # Permitir trafico DHCP saliente
        UFW_OICMP="true" # Permitir trafico ICMP saliente

# PARAMETROS FAIL2BAN
    F2B_LOGROTATE="false" # Activar rotacion de registros (recomendable en servidores con mucho movimiento)
    F2B_ABUSEIPDB="true" # Envia reportes de ip sospechosas en AbuseIPDB y si estan marcadas como sospechosas ejerce un bloqueo mas duradero
        F2B_NORESTORE="0" # Mantener los bloqueos al reiniciar (mantener 0 restaurar 1, por defecto 0)
        F2B_APIKEY="" # Clave de la api de AbuseIPDB
    F2B_DEFAULT="true" # Definir parametros por defecto para todas las jaulas
        F2B_DEFBANTIME="3h" # Tiempo de bloqueo por defecto de las IP
        F2B_DEFFINDTIME="10m" # Tiempo en el que se cuentan la cantidad de intentos fallidos por defecto
        F2B_DEFMAXRETRY="5" # Cantidad de de intentos fallidos para que se aplique el bloqueo por defecto
    F2B_WHITELIST="" # Lista de direcciones ip las cuales nunca seran baneadas (separadas con espacios, localhost esta en la lista por defecto)
    F2B_BANTIMEINCREMENT="true" # Incrementar el tiempo de bloqueo
        F2B_RNDTIME="30m" # Tiempo aleatorio maximo a√±adido al bloqueo
        F2B_MAXTIME="60d" # Tiempo maximo de bloqueo
        F2B_FACTOR="2" # Factor de crecimiento exponencial
        F2B_OVERALL="true" # Aplicar a todas las jaulas, no solo a los reincidentes
    F2B_RECIDIVE="true" # Bloqueo mas sebero para direcciones ip reincidentes
        F2B_RECBANTIME="4w" # Tiempo de bloqueo de las IP
        F2B_RECFINDTIME="3d" # Tiempo en el que se cuentan la cantidad de intentos fallidos
        F2B_RECMAXRETRY="3" # Cantidad de de intentos fallidos para que se aplique el bloqueo
    F2B_SSHD="true" # Jaula para el servicio SSH
    F2B_NGINX="false"
    F2B_APACHE="false"
    F2B_WORDPRESS="false"
    F2B_FTP="false"
    F2B_POSTFIX="false"
    F2B_DOVECOT="false"
    F2B_CUSTOM="false" # Jaula personalizada para aplicacion propia
        F2B_CUSTOM_NAME="" # Nombre de la jaula personalizada (campo obligatorio) 
        F2B_CUSTOM_PORT="" # Puerto de la aplicacion (separados por , sin espacios) (campo obligatorio)
        F2B_CUSTOM_LOG="" # Ruta absoluta del log (campo obligatorio)
            F2B_CUSTOM_MAX="" # Maximo de intentos antes del bloqueo (este campo se puede dejar vacio y se aplica el valor por defecto)
            F2B_CUSTOM_FIND="" # Tiempo en el que tienen que ser los intentos para el blqueo (este campo se puede dejar vacio y se aplica el valor por defecto)
            F2B_CUSTOM_BAN="" # Tiempo de bloqueo (este campo se puede dejar vacio y se aplica el valor por defecto)



# PARAMETROS UNATTENDED_UPGRADE
    UNATT_SOURCES="true" # Cambiar los repositorios de http a https
    UNATT_ENABLE="1" # Activar las actualizaciones automaticas
    UNATT_UPDATEDAYS="1" # Intervalo de dias para actualiazar la lista de paquetes
    UNATT_DOWNLOADDAYS="1" # Intervalo de dias para descargar paquetes
    UNATT_AUTOCLEAN="7" # Intervalo de dias para eliminar los archivos antiguos que ya no estan disponibles para la descarga
    UNATT_AUTOUPGRADE="1" # Activar la instalacion automatica de actualizaciones
    UNATT_DPKG="true" # En caso de que falle dpkg intenta arreglarlo
    UNATT_INSTALLONSHUTDOWN="false" # Ejecuda las actualizaciones con el sistema encendido
    UNATT_REMOVEUNUSED="true" # Eliminar dependencias en desuso
    UNATT_REMOVENEWUNUSED="true" # Eliminar nuevas dependencias en desuso
    UNATT_REBOOT="true" # Permitir el reinicio
    UNATT_REBOOTWITHUSERS="true" # Permitir el reinicio con usuarios conectados

